<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Importance of interactions and pairs in the model — interactions • EIX</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top navbar-mi2" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class = "navbar-mi2logo" href="http://mi2.mini.pw.edu.pl/">
        <img src = "https://github.com/mi2-warsaw/MI2template/blob/master/inst/pkgdown/assets/MI2logo.jpg?raw=true" alt = "MI2" height = 46 title = "MI2">
	  </a>
      <a class="navbar-brand navbar-mi2" href="../index.html">Importance of interactions and pairs in the model</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-mi2 nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/EIX.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Importance of interactions and pairs in the model</h1>
    </div>

    
    <p>This function calculates a table with two measures of importance for interactions and pairs in the model.</p>
    

    <pre class="usage"><span class='fu'>interactions</span>(<span class='no'>xgb_model</span>, <span class='no'>data</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"interactions"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>xgb_model</th>
      <td><p>a xgboost or lightgbm model.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a data table with data used to train the model.</p></td>
    </tr>
    <tr>
      <th>option</th>
      <td><p>if "interactions", the table contains interactions,
if "pairs", this table contains all the pairs in the model.
Default "interactions".</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data table</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Available measures:</p><ul>
<li><p>"sumGain" - sum of Gain value in all nodes, in which given variable occurs,</p></li>
<li><p>"freqency" - number of occurrences in the nodes for given variable.</p></li>
</ul>
    <p>NOTE: Be careful use of this function with <code>option="pairs"</code> parameter,
      because high gain of pair can be a result of high gain of child variable.
     As strong interactions should be considered only these pairs of variables,
     where variable on the bottom (child) has higher gain than variable on the top (parent).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"EIX"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"Matrix"</span>)
<span class='no'>sm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/Matrix/topics/sparse.model.matrix'>sparse.model.matrix</a></span>(<span class='no'>left</span> ~ <span class='no'>.</span> - <span class='fl'>1</span>,  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>HR_data</span>)

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='st'>"xgboost"</span>)
<span class='no'>param</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary:logistic"</span>, <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>xgb_model</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/xgboost/topics/xgb.train'>xgboost</a></span>(<span class='no'>sm</span>, <span class='kw'>params</span> <span class='kw'>=</span> <span class='no'>param</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>HR_data</span>[, <span class='no'>left</span>] <span class='kw'>==</span> <span class='fl'>1</span>, <span class='kw'>nrounds</span> <span class='kw'>=</span> <span class='fl'>50</span>, <span class='kw'>verbose</span><span class='kw'>=</span><span class='fl'>0</span>)

<span class='no'>inter</span> <span class='kw'>&lt;-</span> <span class='fu'>interactions</span>(<span class='no'>xgb_model</span>, <span class='no'>sm</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"interactions"</span>)
<span class='no'>inter</span></div><div class='output co'>#&gt;                   Parent                Child   sumGain frequency
#&gt;  1:      last_evaluation average_montly_hours 745.59427         2
#&gt;  2:      last_evaluation   satisfaction_level 708.87227         4
#&gt;  3:      last_evaluation   time_spend_company 634.99841         3
#&gt;  4:   satisfaction_level   time_spend_company 559.99852         2
#&gt;  5:      last_evaluation       number_project 390.18976         1
#&gt;  6: average_montly_hours   time_spend_company 318.01422         2
#&gt;  7: average_montly_hours      last_evaluation 312.10882         2
#&gt;  8: average_montly_hours       number_project 174.18143         1
#&gt;  9: average_montly_hours   satisfaction_level 169.90201         1
#&gt; 10:   satisfaction_level average_montly_hours 168.38992         1
#&gt; 11:   satisfaction_level      last_evaluation 131.79431         1
#&gt; 12:   time_spend_company      last_evaluation 112.06530         2
#&gt; 13:   satisfaction_level       number_project  87.09535         1
#&gt; 14:   time_spend_company       number_project  39.78419         1
#&gt; 15:       number_project      last_evaluation  19.02951         1
#&gt; 16:            salarylow         salarymedium  14.38998         1</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>inter</span>)</div><div class='img'><img src='interactions-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>inter</span> <span class='kw'>&lt;-</span> <span class='fu'>interactions</span>(<span class='no'>xgb_model</span>, <span class='no'>sm</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"pairs"</span>)
<span class='no'>inter</span></div><div class='output co'>#&gt;                   Parent                Child     sumGain frequency
#&gt;  1:   satisfaction_level       number_project 3573.869457         6
#&gt;  2:   satisfaction_level   time_spend_company 3421.167467         5
#&gt;  3:   satisfaction_level   satisfaction_level 1078.148020        10
#&gt;  4:      last_evaluation average_montly_hours  843.872006         4
#&gt;  5:      last_evaluation   satisfaction_level  826.747874         6
#&gt;  6:      last_evaluation   time_spend_company  651.903801         4
#&gt;  7:   time_spend_company   time_spend_company  446.774647         3
#&gt;  8:      last_evaluation       number_project  399.432373         3
#&gt;  9: average_montly_hours   satisfaction_level  346.017090         5
#&gt; 10: average_montly_hours   time_spend_company  334.233343         3
#&gt; 11: average_montly_hours      last_evaluation  312.108822         2
#&gt; 12: average_montly_hours average_montly_hours  229.242862         6
#&gt; 13: average_montly_hours       number_project  188.761345         3
#&gt; 14:   satisfaction_level average_montly_hours  168.389923         1
#&gt; 15:   satisfaction_level      last_evaluation  131.794312         1
#&gt; 16:      last_evaluation      last_evaluation  125.887398         1
#&gt; 17:        Work_accident       number_project  119.155579         1
#&gt; 18:   time_spend_company      last_evaluation  112.065304         2
#&gt; 19:            salarylow   time_spend_company   80.271004         1
#&gt; 20:   time_spend_company       number_project   67.291999         3
#&gt; 21:            salarylow         salarymedium   59.674581         2
#&gt; 22:        Work_accident   time_spend_company   54.700195         1
#&gt; 23:        Work_accident   satisfaction_level   39.800945         3
#&gt; 24:       number_project            salarylow   28.924757         1
#&gt; 25:       number_project      last_evaluation   19.029507         1
#&gt; 26:   time_spend_company   satisfaction_level   16.250031         1
#&gt; 27:            salarylow        Work_accident   11.632748         1
#&gt; 28:        Work_accident      last_evaluation    6.214535         1
#&gt; 29:       number_project   satisfaction_level    3.267536         2
#&gt;                   Parent                Child     sumGain frequency</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>inter</span>)</div><div class='img'><img src='interactions-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>lightgbm</span>)
<span class='no'>train_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/lightgbm/topics/lgb.Dataset'>lgb.Dataset</a></span>(<span class='no'>sm</span>, <span class='kw'>label</span> <span class='kw'>=</span>  <span class='no'>HR_data</span>[, <span class='no'>left</span>] <span class='kw'>==</span> <span class='fl'>1</span>)
<span class='no'>params</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>objective</span> <span class='kw'>=</span> <span class='st'>"binary"</span>, <span class='kw'>max_depth</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>lgb_model</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/lightgbm/topics/lgb.train'>lgb.train</a></span>(<span class='no'>params</span>, <span class='no'>train_data</span>, <span class='fl'>50</span>)

<span class='no'>inter</span> <span class='kw'>&lt;-</span> <span class='fu'>interactions</span>(<span class='no'>lgb_model</span>, <span class='no'>sm</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"interactions"</span>)
<span class='no'>inter</span></div><div class='output co'>#&gt;                   Parent                Child   sumGain frequency
#&gt;  1:   satisfaction_level   time_spend_company 2434.0047         3
#&gt;  2:      last_evaluation   satisfaction_level 1595.2254         5
#&gt;  3:      last_evaluation average_montly_hours 1328.0190         3
#&gt;  4:      last_evaluation   time_spend_company 1042.6180         2
#&gt;  5: average_montly_hours   time_spend_company  819.9025         2
#&gt;  6: average_montly_hours       number_project  453.4923         1
#&gt;  7: average_montly_hours      last_evaluation  419.0138         1
#&gt;  8:       number_project      last_evaluation  411.0702         2
#&gt;  9:   time_spend_company      last_evaluation  341.3317         1
#&gt; 10: average_montly_hours   satisfaction_level  292.9402         2
#&gt; 11:   satisfaction_level average_montly_hours  117.5836         1
#&gt; 12:        Work_accident            salarylow  101.0511         1</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>inter</span>)</div><div class='img'><img src='interactions-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>inter</span> <span class='kw'>&lt;-</span> <span class='fu'>interactions</span>(<span class='no'>lgb_model</span>, <span class='no'>sm</span>, <span class='kw'>option</span> <span class='kw'>=</span> <span class='st'>"pairs"</span>)
<span class='no'>inter</span></div><div class='output co'>#&gt;                   Parent                Child    sumGain frequency
#&gt;  1:   satisfaction_level       number_project 9845.23985        21
#&gt;  2:   satisfaction_level   time_spend_company 8171.72215        11
#&gt;  3:   satisfaction_level   satisfaction_level 2052.78421         5
#&gt;  4:      last_evaluation   satisfaction_level 1676.85531         6
#&gt;  5:      last_evaluation average_montly_hours 1328.01895         3
#&gt;  6:      last_evaluation   time_spend_company 1167.64834         4
#&gt;  7:   time_spend_company   time_spend_company 1161.58576         6
#&gt;  8: average_montly_hours   time_spend_company  819.90253         2
#&gt;  9:   time_spend_company      last_evaluation  612.09506         2
#&gt; 10: average_montly_hours       number_project  485.28049         4
#&gt; 11: average_montly_hours      last_evaluation  419.01379         1
#&gt; 12:       number_project      last_evaluation  411.07022         2
#&gt; 13: average_montly_hours   satisfaction_level  390.77878         3
#&gt; 14:   satisfaction_level      last_evaluation  251.55655        10
#&gt; 15:        Work_accident      last_evaluation  135.70107         1
#&gt; 16:      last_evaluation      last_evaluation  130.07451         1
#&gt; 17:        Work_accident average_montly_hours  120.72714         1
#&gt; 18:   satisfaction_level average_montly_hours  117.58363         1
#&gt; 19:        Work_accident            salarylow  101.05111         1
#&gt; 20:   time_spend_company       number_project   78.45094         7
#&gt; 21:        Work_accident   satisfaction_level   36.56250         3
#&gt; 22:      last_evaluation       number_project   27.50140         4
#&gt; 23:   time_spend_company   satisfaction_level   10.43890         1
#&gt;                   Parent                Child    sumGain frequency</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>inter</span>)</div><div class='img'><img src='interactions-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Ewelina Karbowiak, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

