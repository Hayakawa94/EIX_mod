---
title: "xgbExplainer: adult_data"
author: "Ewelina Karbowiak"
date: "2018-05-07"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
Example of useage for adult_data from [www.archive.ics.uci.edu] (http://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data). 

Description of packages functionalities in 
vignette: HR_data.

<!-- ```{r, echo=FALSE, warning=FALSE, message=FALSE} -->
<!-- knitr::opts_chunk$set(fig.height = 8, fig.width = 8, fig.align = "center") -->
<!-- library("data.table") -->
<!-- library("xgbExplainer") -->
<!-- library("xgboost") -->
<!-- library("Matrix") -->
<!-- library("DALEX") -->
<!-- library("ggradar") -->
<!-- ``` -->

<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- adult_data<-fread('http://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data',stringsAsFactors = TRUE ) -->
<!-- data<-adult_data -->
<!-- data=na.omit(data) -->

<!-- data[,label:=ifelse(data[,"V15"]==">50K",1,0)] -->
<!-- data<-data[,-15] -->
<!-- label<-data[,"label"]==1 -->

<!-- colnames(data)=c("age","workclass","fnlwgt","education","education_num","marital_status","occupation","relationship","race","sex","capital_gain","capital_loss","hours_per_week","native_country","label") -->


<!-- data<-data[,`:=`(workclass=as.factor(workclass),education=as.factor(education),marital_status=as.factor(marital_status),occupation=as.factor(occupation),relationship=as.factor(relationship),race=as.factor(race),sex=as.factor(sex),native_country=as.factor(native_country))] -->


<!-- sparse_matrix <- sparse.model.matrix(label~.-1, data = data) -->
<!-- colnames(data) -->
<!-- head(data) -->
<!-- str(data) -->
<!-- head(sparse_matrix) -->
<!-- xgb.train.data = xgb.DMatrix(sparse_matrix,label = label,missing = NA) -->
<!-- param <- list(objective = "binary:logistic", base_score = 0.5,max_depth=2) -->
<!-- xgb.model <-xgboost( param = param,data = xgb.train.data,nrounds = 20,verbose = FALSE) -->
<!-- head(xgb.importance(colnames(sparse_matrix),xgb.model)) -->
<!-- ``` -->


<!-- ## Model visualiations -->


<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- gainLollypop(xgb.model, sparse_matrix) -->
<!-- ``` -->


<!-- ##Finding interactions -->


<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- knitr::kable(head(calculateGainTable(xgb.model,sparse_matrix))) -->
<!-- knitr::kable(head(countPairs(xgb.model,sparse_matrix))) -->
<!-- showPairsGainPlot(xgb.model,sparse_matrix) -->
<!-- ``` -->


<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- knitr::kable(head(importanceInteractions(xgb.model,sparse_matrix))) -->
<!-- showInteractionsGainPlot(xgb.model,sparse_matrix) -->
<!-- ``` -->

<!-- ##Variable importance -->



<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- knitr::kable(head(countRoots(xgb.model, sparse_matrix))) -->
<!-- knitr::kable(head(calculateWeightedDepth(xgb.model, sparse_matrix))) -->
<!-- ``` -->

<!-- ##Variable and interactions importance -->


<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- knitr::kable(head(importanceTable(xgb.model, sparse_matrix))) -->
<!-- importancePlot(xgb.model, sparse_matrix) -->
<!-- ``` -->


<!-- ```{r, warning=FALSE, message=FALSE} -->
<!-- importanceRadarPlot(xgb.model,sparse_matrix,top=10) -->
<!-- ``` -->

<!-- ##Explanation of one prediction taking into account interactions -->

<!-- ```{r, warning=FALSE, message=FALSE} -->

<!-- ``` -->

<!-- ``` -->
